  <launch>
    <arg name="map_size_x" value="30.0"/>
    <arg name="map_size_y" value="20.0"/>
    <arg name="map_size_z" value=" 3.0"/>

    <arg name="odom_topic" value="visual_slam/odom" />
    
    <!-- 
        formation_type : 
            0 : no formation  
            1 : rectangle with a center (5 drones)
            2 : rgular tetrahedron (4 drones)
            3 : hexagon (7 drones)
            4 : z_letter (10 drones)
            5 : j_letter (9 drones)
            6 : u_letter (8 drones)
            7 : Normal hexagon (7 drones)
     -->
    <arg name="formation_type" value="7" />

    <!-- 
        optimization parameters :
            cost function weight :
                weight_obstacle
                weight_swarm
                weight_feasibility
                weight_sqrvariance
                weight_time
                weight_formation
                weight_gather
            threshold and clearance:
                obstacle_clearance
                swarm_clearance
                swarm_gather_threshold
     -->
    <arg name="weight_obstacle"         value="30000.0"/>
    <arg name="weight_swarm"            value="100000.0"/>
    <arg name="weight_feasibility"      value="1000.0"/>
    <arg name="weight_sqrvariance"      value="50000.0"/>
    <arg name="weight_time"             value="200.0"/>
    <arg name="weight_formation"        value="30000.0"/>
    <arg name="weight_gather"           value="30.0"/>

    <arg name="obstacle_clearance"      value="0.3"/>
    <arg name="swarm_clearance"         value="0.8"/>
    <arg name="swarm_gather_threshold"  value="5.0"/>

    <!-- swarm topic transmitter bridge-->
    <include file="$(find swarm_bridge)/launch/bridge.launch">
        <arg name="drone_id" value="999"/>
        <arg name="broadcast_ip" value="127.0.0.255"/>
    </include>

    <!-- map -->
    <node pkg ="map_generator" name ="random_forest" type ="random_forest" output = "screen">    
        <param name="map/x_size"     value="12" />
        <param name="map/y_size"     value="7" />
        <param name="map/z_size"     value="3" />
        <param name="map/resolution" value="0.1"/>        
        
        <param name="ObstacleShape/seed" value="1"/>
        
        <!-- 
            0 : none
            1 : wall with hole

         -->
        <param name="fix_obs_type" value="0"/>
        
        <param name="map/obs_num"    value="30"/> <!--30-->
        <param name="ObstacleShape/lower_rad" value="0.3"/>
        <param name="ObstacleShape/upper_rad" value="0.3"/>
        <param name="ObstacleShape/lower_hei" value="2.5"/>
        <param name="ObstacleShape/upper_hei" value="2.5"/>        
        
        <param name="map/circle_num" value="5"/> <!--5-->    
        <param name="ObstacleShape/radius_l" value="1.2"/>        
        <param name="ObstacleShape/radius_h" value="1.2"/>        
        <param name="ObstacleShape/z_l" value="0.7"/>        
        <param name="ObstacleShape/z_h" value="0.8"/>        
        <param name="ObstacleShape/theta" value="0.5"/>        
    
        <param name="pub_rate"   value="1.0"/>  
        <param name="min_distance" value="0.8"/>         
    </node>

    <![CDATA[node pkg="mockamap" type="mockamap_node" name="mockamap_node" output="screen">  
      <remap from="/mock_map" to="/map_generator/global_cloud"/>

      <param name="seed" type="int" value="2"/>
      <param name="update_freq" type="double" value="0.5"/>

      <!--  box edge length, unit meter-->
      <param name="resolution" type="double" value="0.1"/>

      <!-- map size unit meter-->
      <param name="x_length" value="36"/>
      <param name="y_length" value="20"/>
      <param name="z_length" value="3"/>

      <param name="type" type="int" value="1"/>
      <!-- 1 perlin noise parameters -->
      <!-- complexity:    base noise frequency,
                              large value will be complex
                              typical 0.0 ~ 0.5 -->
      <!-- fill:          infill persentage
                              typical: 0.4 ~ 0.0 -->
      <!-- fractal:       large value will have more detail-->
      <!-- attenuation:   for fractal attenuation
                              typical: 0.0 ~ 0.5 -->

      <param name="complexity"    type="double" value="0.05"/>
      <param name="fill"          type="double" value="0.15"/>
      <param name="fractal"       type="int"    value="1"/>
      <param name="attenuation"   type="double" value="0.1"/>
  </node]]>

    <!-- <node pkg ="ground_station" name ="ground_station" type ="ground_station" output = "screen">
        <param name="ground/drone_num"   value="4" type="int"/>
    
    </node> -->

    <include file="$(find ego_planner)/launch/real_world/run_in_real.launch">
        <arg name="drone_id" value="0"/>

        <arg name="init_x" value="-10.0"/>
        <arg name="init_y" value="0.0"/>
        <arg name="init_z" value="1.0"/>

        <arg name="target_x" value="10.0"/>
        <arg name="target_y" value="0.0"/>
        <arg name="target_z" value="1"/>

        <arg name="map_size_x"              value="$(arg map_size_x)"/>
        <arg name="map_size_y"              value="$(arg map_size_y)"/>
        <arg name="map_size_z"              value="$(arg map_size_z)"/>
        <arg name="odom_topic"              value="$(arg odom_topic)"/>
        <arg name="formation_type"          value="$(arg formation_type)"/>
        <arg name="weight_obstacle"         value="$(arg weight_obstacle)"/>
        <arg name="weight_swarm"            value="$(arg weight_swarm)"/>
        <arg name="weight_feasibility"      value="$(arg weight_feasibility)"/>
        <arg name="weight_sqrvariance"      value="$(arg weight_sqrvariance)"/>
        <arg name="weight_time"             value="$(arg weight_time)"/>
        <arg name="weight_formation"        value="$(arg weight_formation)"/>
        <arg name="weight_gather"           value="$(arg weight_gather)"/>
        <arg name="obstacle_clearance"      value="$(arg obstacle_clearance)"/>
        <arg name="swarm_clearance"         value="$(arg swarm_clearance)"/>
        <arg name="swarm_gather_threshold"  value="$(arg swarm_gather_threshold)"/>
    </include>
    
    <include file="$(find ego_planner)/launch/real_world/run_in_real.launch">
        <arg name="drone_id" value="1"/>

        <arg name="init_x" value="-7.4"/>
        <arg name="init_y" value="-1.5"/>
        <arg name="init_z" value="1.0"/>

        <arg name="target_x" value="12.6"/>
        <arg name="target_y" value="-1.5"/>
        <arg name="target_z" value="1.0"/>

        <arg name="map_size_x"              value="$(arg map_size_x)"/>
        <arg name="map_size_y"              value="$(arg map_size_y)"/>
        <arg name="map_size_z"              value="$(arg map_size_z)"/>
        <arg name="odom_topic"              value="$(arg odom_topic)"/>
        <arg name="formation_type"          value="$(arg formation_type)"/>
        <arg name="weight_obstacle"         value="$(arg weight_obstacle)"/>
        <arg name="weight_swarm"            value="$(arg weight_swarm)"/>
        <arg name="weight_feasibility"      value="$(arg weight_feasibility)"/>
        <arg name="weight_sqrvariance"      value="$(arg weight_sqrvariance)"/>
        <arg name="weight_time"             value="$(arg weight_time)"/>
        <arg name="weight_formation"        value="$(arg weight_formation)"/>
        <arg name="weight_gather"           value="$(arg weight_gather)"/>
        <arg name="obstacle_clearance"      value="$(arg obstacle_clearance)"/>
        <arg name="swarm_clearance"         value="$(arg swarm_clearance)"/>
        <arg name="swarm_gather_threshold"  value="$(arg swarm_gather_threshold)"/>
    </include>

    <include file="$(find ego_planner)/launch/real_world/run_in_real.launch">
        <arg name="drone_id" value="2"/>

        <arg name="init_x" value="-10.0"/>
        <arg name="init_y" value="-3"/>
        <arg name="init_z" value="1.0"/>

        <arg name="target_x" value="10.0"/>
        <arg name="target_y" value="-3.0"/>
        <arg name="target_z" value="1.0"/>

        <arg name="map_size_x"              value="$(arg map_size_x)"/>
        <arg name="map_size_y"              value="$(arg map_size_y)"/>
        <arg name="map_size_z"              value="$(arg map_size_z)"/>
        <arg name="odom_topic"              value="$(arg odom_topic)"/>
        <arg name="formation_type"          value="$(arg formation_type)"/>
        <arg name="weight_obstacle"         value="$(arg weight_obstacle)"/>
        <arg name="weight_swarm"            value="$(arg weight_swarm)"/>
        <arg name="weight_feasibility"      value="$(arg weight_feasibility)"/>
        <arg name="weight_sqrvariance"      value="$(arg weight_sqrvariance)"/>
        <arg name="weight_time"             value="$(arg weight_time)"/>
        <arg name="weight_formation"        value="$(arg weight_formation)"/>
        <arg name="weight_gather"           value="$(arg weight_gather)"/>
        <arg name="obstacle_clearance"      value="$(arg obstacle_clearance)"/>
        <arg name="swarm_clearance"         value="$(arg swarm_clearance)"/>
        <arg name="swarm_gather_threshold"  value="$(arg swarm_gather_threshold)"/>
    </include>

    <include file="$(find ego_planner)/launch/real_world/run_in_real.launch">
        <arg name="drone_id" value="3"/>

        <arg name="init_x" value="-12.6"/>
        <arg name="init_y" value="-1.5"/>
         <arg name="init_z" value="1.0"/>

        <arg name="target_x" value="7.4"/>
        <arg name="target_y" value="-1.5"/>
        <arg name="target_z" value="1"/>

        <arg name="map_size_x"              value="$(arg map_size_x)"/>
        <arg name="map_size_y"              value="$(arg map_size_y)"/>
        <arg name="map_size_z"              value="$(arg map_size_z)"/>
        <arg name="odom_topic"              value="$(arg odom_topic)"/>
        <arg name="formation_type"          value="$(arg formation_type)"/>
        <arg name="weight_obstacle"         value="$(arg weight_obstacle)"/>
        <arg name="weight_swarm"            value="$(arg weight_swarm)"/>
        <arg name="weight_feasibility"      value="$(arg weight_feasibility)"/>
        <arg name="weight_sqrvariance"      value="$(arg weight_sqrvariance)"/>
        <arg name="weight_time"             value="$(arg weight_time)"/>
        <arg name="weight_formation"        value="$(arg weight_formation)"/>
        <arg name="weight_gather"           value="$(arg weight_gather)"/>
        <arg name="obstacle_clearance"      value="$(arg obstacle_clearance)"/>
        <arg name="swarm_clearance"         value="$(arg swarm_clearance)"/>
        <arg name="swarm_gather_threshold"  value="$(arg swarm_gather_threshold)"/>
    </include>
    
    <include file="$(find ego_planner)/launch/real_world/run_in_real.launch">
        <arg name="drone_id" value="4"/>

        <arg name="init_x" value="-12.6"/>
        <arg name="init_y" value="1.5"/>
         <arg name="init_z" value="1.0"/>

        <arg name="target_x" value="7.4"/>
        <arg name="target_y" value="1.5"/>
        <arg name="target_z" value="1"/>

        <arg name="map_size_x"              value="$(arg map_size_x)"/>
        <arg name="map_size_y"              value="$(arg map_size_y)"/>
        <arg name="map_size_z"              value="$(arg map_size_z)"/>
        <arg name="odom_topic"              value="$(arg odom_topic)"/>
        <arg name="formation_type"          value="$(arg formation_type)"/>
        <arg name="weight_obstacle"         value="$(arg weight_obstacle)"/>
        <arg name="weight_swarm"            value="$(arg weight_swarm)"/>
        <arg name="weight_feasibility"      value="$(arg weight_feasibility)"/>
        <arg name="weight_sqrvariance"      value="$(arg weight_sqrvariance)"/>
        <arg name="weight_time"             value="$(arg weight_time)"/>
        <arg name="weight_formation"        value="$(arg weight_formation)"/>
        <arg name="weight_gather"           value="$(arg weight_gather)"/>
        <arg name="obstacle_clearance"      value="$(arg obstacle_clearance)"/>
        <arg name="swarm_clearance"         value="$(arg swarm_clearance)"/>
        <arg name="swarm_gather_threshold"  value="$(arg swarm_gather_threshold)"/>
    </include>

    <include file="$(find ego_planner)/launch/real_world/run_in_real.launch">
        <arg name="drone_id" value="5"/>

        <arg name="init_x" value="-10.0"/>
        <arg name="init_y" value="3"/>
         <arg name="init_z" value="1.0"/>

        <arg name="target_x" value="10.0"/>
        <arg name="target_y" value="3.0"/>
        <arg name="target_z" value="1"/>

        <arg name="map_size_x"              value="$(arg map_size_x)"/>
        <arg name="map_size_y"              value="$(arg map_size_y)"/>
        <arg name="map_size_z"              value="$(arg map_size_z)"/>
        <arg name="odom_topic"              value="$(arg odom_topic)"/>
        <arg name="formation_type"          value="$(arg formation_type)"/>
        <arg name="weight_obstacle"         value="$(arg weight_obstacle)"/>
        <arg name="weight_swarm"            value="$(arg weight_swarm)"/>
        <arg name="weight_feasibility"      value="$(arg weight_feasibility)"/>
        <arg name="weight_sqrvariance"      value="$(arg weight_sqrvariance)"/>
        <arg name="weight_time"             value="$(arg weight_time)"/>
        <arg name="weight_formation"        value="$(arg weight_formation)"/>
        <arg name="weight_gather"           value="$(arg weight_gather)"/>
        <arg name="obstacle_clearance"      value="$(arg obstacle_clearance)"/>
        <arg name="swarm_clearance"         value="$(arg swarm_clearance)"/>
        <arg name="swarm_gather_threshold"  value="$(arg swarm_gather_threshold)"/>
    </include>

    <include file="$(find ego_planner)/launch/real_world/run_in_real.launch">
        <arg name="drone_id" value="6"/>

        <arg name="init_x" value="-7.4"/>
        <arg name="init_y" value="1.5"/>
        <arg name="init_z" value="1.0"/>
        
        <arg name="target_x" value="12.6"/>
        <arg name="target_y" value="1.5"/>
        <arg name="target_z" value="1"/>
        
        <arg name="map_size_x"              value="$(arg map_size_x)"/>
        <arg name="map_size_y"              value="$(arg map_size_y)"/>
        <arg name="map_size_z"              value="$(arg map_size_z)"/>
        <arg name="odom_topic"              value="$(arg odom_topic)"/>
        <arg name="formation_type"          value="$(arg formation_type)"/>
        <arg name="weight_obstacle"         value="$(arg weight_obstacle)"/>
        <arg name="weight_swarm"            value="$(arg weight_swarm)"/>
        <arg name="weight_feasibility"      value="$(arg weight_feasibility)"/>
        <arg name="weight_sqrvariance"      value="$(arg weight_sqrvariance)"/>
        <arg name="weight_time"             value="$(arg weight_time)"/>
        <arg name="weight_formation"        value="$(arg weight_formation)"/>
        <arg name="weight_gather"           value="$(arg weight_gather)"/>
        <arg name="obstacle_clearance"      value="$(arg obstacle_clearance)"/>
        <arg name="swarm_clearance"         value="$(arg swarm_clearance)"/>
        <arg name="swarm_gather_threshold"  value="$(arg swarm_gather_threshold)"/>
    </include>

  </launch>
